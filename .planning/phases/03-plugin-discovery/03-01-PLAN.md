---
phase: 03-plugin-discovery
plan: 01
type: execute
depends_on: []
files_modified: [bin/plugin.js, commands/gsd/plugin.md]
---

<objective>
Implement `plugin list` command that displays all installed plugins with their status.

Purpose: Enable users to see what plugins are installed and their current state (version, linked status).
Output: Working `plugin list` command showing installed plugins with name, version, description, and linked indicator.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-plugin-installation/02-01-SUMMARY.md
@bin/plugin.js
@commands/gsd/plugin.md

**Tech stack available:** Node.js, fs, path, os (zero external dependencies)
**Established patterns:**
- Plugin CLI pattern: subcommands with source argument
- Manifest location: ~/.claude/{plugin-name}/plugin.json
- Color constants: cyan, green, yellow, red, dim, reset
- Console output formatting with colored labels

**Constraining decisions:**
- Phase 02-01: Plugin.json stored at ~/.claude/{plugin-name}/plugin.json with _installed tracking
- Phase 02-02: Linked plugins have `_installed.linked: true` and `_installed.source` path
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement listPlugins function in bin/plugin.js</name>
  <files>bin/plugin.js</files>
  <action>
Add a listPlugins() function that:
1. Gets config directory via getConfigDir()
2. Scans ~/.claude/ for directories containing plugin.json (skip known non-plugin dirs: commands, agents, get-shit-done)
3. For each found plugin.json:
   - Parse the manifest
   - Extract: name, version, description, _installed.linked, _installed.date
4. Display formatted output:
   - Header: "Installed Plugins:"
   - Each plugin: "  {name} v{version} {linked indicator if applicable}"
   - Description on next line: "    {description}"
   - If no plugins: "No plugins installed."

Use existing color constants (cyan for name, dim for description, yellow for "(linked)" indicator).
Skip directories that fail to parse (corrupted plugin.json) with a warning.
  </action>
  <verify>node bin/plugin.js list (in repo) shows "No plugins installed." or lists any test plugins</verify>
  <done>listPlugins function exists, handles empty state, parses manifests, formats output with colors</done>
</task>

<task type="auto">
  <name>Task 2: Wire up list command and update help</name>
  <files>bin/plugin.js, commands/gsd/plugin.md</files>
  <action>
1. In bin/plugin.js switch statement, replace the "not yet implemented" placeholder for 'list' case with a call to listPlugins()

2. Update showHelp() function:
   - Change "list" line from "(not yet implemented)" to actual description
   - Add example: "# List all installed plugins" / "plugin list"

3. In commands/gsd/plugin.md:
   - Update the "For list:" section in <process> to describe actual behavior
   - Remove "(Phase 3)" annotation from list command descriptions
   - Add example showing list output format
  </action>
  <verify>node bin/plugin.js list runs without error; node bin/plugin.js --help shows updated list description</verify>
  <done>list command functional, help updated, plugin.md documents the command properly</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `node bin/plugin.js list` runs and shows "No plugins installed." or lists plugins
- [ ] `node bin/plugin.js --help` shows list command without "not yet implemented"
- [ ] If test plugin installed, list shows: name, version, description, linked status
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- plugin list command works end-to-end
- Help text updated
- Ready for 03-02 (plugin info)
</success_criteria>

<output>
After completion, create `.planning/phases/03-plugin-discovery/03-01-SUMMARY.md`
</output>
