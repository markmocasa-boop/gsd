---
phase: 04-plugin-activation
plan: 01
type: execute
depends_on: []
files_modified: [bin/plugin.js, commands/gsd/plugin.md]
---

<objective>
Implement plugin enable/disable commands to toggle plugin activation state.

Purpose: Allow users to temporarily disable plugins without uninstalling, enabling easy experimentation and troubleshooting.
Output: `plugin enable <name>` and `plugin disable <name>` commands that toggle the `_installed.enabled` flag in plugin.json.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:
@.planning/phases/03-plugin-discovery/03-02-SUMMARY.md

# Existing implementation:
@bin/plugin.js
@commands/gsd/plugin.md

**Tech stack available:** Node.js fs/path/os, existing plugin.js patterns
**Established patterns:**
- Plugin manifest stored at `~/.claude/{plugin-name}/plugin.json`
- `_installed` object tracks installation metadata (date, files, linked, source)
- CLI switch statement dispatches commands
- Error handling with colored output (cyan, green, yellow, red)

**Constraining decisions:**
- Phase 01-01: Manifest uses JSON for machine-readability
- Phase 02-01: Plugin metadata stored in `_installed` object
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement enablePlugin and disablePlugin functions</name>
  <files>bin/plugin.js</files>
  <action>
Add two functions to bin/plugin.js:

1. `enablePlugin(pluginName)`:
   - Validate pluginName provided (error if not)
   - Read plugin.json from `~/.claude/{pluginName}/plugin.json`
   - Error if plugin not installed
   - Check if already enabled (warn and exit 0)
   - Set `_installed.enabled = true` in manifest
   - Write updated manifest back to file
   - Print success: "Plugin {name} enabled"

2. `disablePlugin(pluginName)`:
   - Validate pluginName provided (error if not)
   - Read plugin.json from `~/.claude/{pluginName}/plugin.json`
   - Error if plugin not installed
   - Check if already disabled (warn and exit 0)
   - Set `_installed.enabled = false` in manifest
   - Write updated manifest back to file
   - Print success: "Plugin {name} disabled"

Important:
- Default `_installed.enabled` to `true` for existing plugins (enabled by default)
- Follow existing error handling pattern (red for errors, yellow for warnings, cyan for names)
- Use same `getConfigDir()` function for path resolution
  </action>
  <verify>
Check functions exist in bin/plugin.js:
```bash
grep -E "function (enable|disable)Plugin" bin/plugin.js
```
Should show both function definitions.
  </verify>
  <done>enablePlugin and disablePlugin functions exist with proper validation, manifest updates, and colored output</done>
</task>

<task type="auto">
  <name>Task 2: Wire enable/disable commands and update help</name>
  <files>bin/plugin.js, commands/gsd/plugin.md</files>
  <action>
1. In bin/plugin.js, add cases to the switch statement:
   ```javascript
   case 'enable':
     enablePlugin(source);
     break;
   case 'disable':
     disablePlugin(source);
     break;
   ```

2. Update `showHelp()` function to include:
   - `plugin enable <name>    Enable a disabled plugin`
   - `plugin disable <name>   Disable a plugin (keeps files)`

3. Update commands/gsd/plugin.md:
   - Add to overview commands list:
     - `/gsd:plugin enable <name>` - Enable a disabled plugin
     - `/gsd:plugin disable <name>` - Disable a plugin (keeps files)
   - Add process section for enable/disable
   - Add example showing enable/disable usage

4. Update listPlugins() to show enabled/disabled status:
   - Read `_installed.enabled` from each plugin manifest
   - Show "(disabled)" indicator for disabled plugins (dim text)
   - Continue showing "(linked)" for linked plugins
  </action>
  <verify>
Test help output:
```bash
node bin/plugin.js --help | grep -E "(enable|disable)"
```
Should show both enable and disable in help text.
  </verify>
  <done>Enable/disable commands wired in switch statement, help text updated, plugin.md documentation updated, list command shows disabled status</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `node bin/plugin.js --help` shows enable and disable commands
- [ ] `node bin/plugin.js enable` without name shows error
- [ ] `node bin/plugin.js disable` without name shows error
- [ ] Enable/disable pattern matches existing install/uninstall style
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors in plugin.js execution
- Enable/disable commands follow existing CLI patterns
</success_criteria>

<output>
After completion, create `.planning/phases/04-plugin-activation/04-01-SUMMARY.md`
</output>
