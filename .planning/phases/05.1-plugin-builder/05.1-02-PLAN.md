---
phase: 05.1-plugin-builder
plan: 02
type: execute
depends_on: ["05.1-01"]
files_modified:
  - commands/gsd/plugin-build-new.md
---

<objective>
Create the /gsd:plugin-build-new command that invokes the plugin builder workflow.

Purpose: Provide users with a simple command to start the plugin creation wizard, making plugin development accessible and following GSD conventions.

Output: User-facing command that guides users through interactive plugin creation.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05.1-plugin-builder/05.1-01-SUMMARY.md

# Workflow created in prior plan:
@get-shit-done/workflows/plugin-builder.md

# Plugin templates for generation:
@get-shit-done/templates/plugin/plugin.json
@get-shit-done/templates/plugin/README.md
@get-shit-done/templates/plugin/command.md
@get-shit-done/templates/plugin/hook.md
@get-shit-done/templates/plugin/workflow.md
@get-shit-done/templates/plugin/agent.md
@get-shit-done/templates/plugin/docker-compose.yml

# Existing command patterns:
@commands/gsd/plugin.md (pattern for plugin-related commands)
@commands/gsd/new-project.md (pattern for initialization commands)

**Constraints:**
- Command must invoke the plugin-builder workflow
- Output directory should be user-specifiable (default: current directory)
- Generated plugin must pass validation (per plugin-format.md rules)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /gsd:plugin-build-new command</name>
  <files>commands/gsd/plugin-build-new.md</files>
  <action>
Create the user-facing command at `commands/gsd/plugin-build-new.md`.

**Command structure:**

```markdown
---
name: gsd:plugin-build-new
description: Create a new GSD plugin through interactive workflow
argument-hint: "[output-directory]"
allowed-tools: [Read, Write, Bash, Glob, Grep, AskUserQuestion]
---

<objective>
Guide users through creating a new GSD plugin with an interactive workflow.

Purpose: Make plugin development accessible by asking questions and generating all necessary files.
Output: Complete plugin directory ready for development and installation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/plugin-builder.md
</execution_context>

<process>

<step name="determine_output">
Check if output directory was specified:
- If provided: Use that directory
- If not: Default to current working directory

Validate the directory is writable and not inside ~/.claude/ (plugins should be developed separately, then installed).
</step>

<step name="invoke_workflow">
Follow the plugin-builder.md workflow:
1. Gather plugin metadata (name, description, author, license)
2. Determine components needed (commands, hooks, workflows, agents, services)
3. Collect details for each component
4. Generate all files
</step>

<step name="validate_and_report">
After generation:
1. Validate the generated plugin.json
2. Show summary of created files
3. Provide next steps:
   - Test the plugin: `gsd plugin install ./[plugin-name]`
   - Customize generated files as needed
   - Add implementation to command/hook files
</step>

</process>
```

The command should:
1. Accept optional output directory argument
2. Delegate to plugin-builder.md workflow for the actual work
3. Report success with next steps

Follow the pattern from new-project.md for initialization flow structure.
  </action>
  <verify>File exists at commands/gsd/plugin-build-new.md with proper YAML frontmatter and process structure</verify>
  <done>Command file created with objective, execution_context, and process steps that invoke the workflow</done>
</task>

<task type="auto">
  <name>Task 2: Verify end-to-end plugin creation</name>
  <files>commands/gsd/plugin-build-new.md</files>
  <action>
Review and refine the command to ensure the end-to-end flow works:

1. **Verify workflow reference** - Confirm execution_context properly references plugin-builder.md
2. **Verify template references** - Confirm all template paths in workflow are correct
3. **Add usage examples** in the command file showing:
   - Basic usage: `/gsd:plugin-build-new`
   - With directory: `/gsd:plugin-build-new ./my-plugins/my-new-plugin`

4. **Add validation hints** - Ensure the command process mentions:
   - Plugin name must be kebab-case
   - Commands will be namespaced as `pluginname:command`
   - Output will include plugin.json, README.md, and selected component files

5. **Review for consistency** with existing commands:
   - Check frontmatter matches other gsd:* command patterns
   - Verify allowed-tools includes everything needed for file generation
  </action>
  <verify>Command file has usage examples, proper references, and follows existing command patterns</verify>
  <done>Command complete with examples, validation guidance, and consistent structure</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Command file exists at commands/gsd/plugin-build-new.md
- [ ] YAML frontmatter has name, description, argument-hint, allowed-tools
- [ ] Execution context references plugin-builder.md workflow
- [ ] Process has clear steps: determine_output, invoke_workflow, validate_and_report
- [ ] Usage examples included
- [ ] Command follows existing gsd:* command patterns
</verification>

<success_criteria>

- Command file created and follows GSD conventions
- Workflow reference correct
- Usage examples provided
- Phase 5.1 complete
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-plugin-builder/05.1-02-SUMMARY.md`
</output>
