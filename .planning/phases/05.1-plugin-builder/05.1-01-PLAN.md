---
phase: 05.1-plugin-builder
plan: 01
type: execute
depends_on: []
files_modified:
  - get-shit-done/workflows/plugin-builder.md
  - get-shit-done/templates/plugin/command.md
  - get-shit-done/templates/plugin/hook.md
  - get-shit-done/templates/plugin/workflow.md
  - get-shit-done/templates/plugin/agent.md
  - get-shit-done/templates/plugin/docker-compose.yml
---

<objective>
Create the plugin builder workflow and component templates for guided plugin creation.

Purpose: Enable users to create new plugins through an interactive workflow that asks questions and generates appropriate files, using GSD's existing patterns (AskUserQuestion, templates, workflows).

Output: Workflow file and component templates that the plugin-build-new command will use.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing plugin templates and format reference:
@get-shit-done/templates/plugin/plugin.json
@get-shit-done/templates/plugin/plugin.json.md
@get-shit-done/templates/plugin/README.md
@get-shit-done/references/plugin-format.md

# Existing GSD patterns for questioning and template usage:
@get-shit-done/workflows/discuss-phase.md (example of adaptive questioning workflow)
@get-shit-done/references/questioning.md (questioning patterns)

**Key constraints from prior phases:**
- Plugin names use kebab-case only
- Commands use `pluginname:command` namespace format
- All files install to specific locations per plugin-format.md
- Services are optional (null when not needed)
- Hooks run synchronously, failures don't block GSD
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create plugin builder workflow</name>
  <files>get-shit-done/workflows/plugin-builder.md</files>
  <action>
Create the plugin builder workflow at `get-shit-done/workflows/plugin-builder.md`.

**Workflow structure:**

1. **Metadata gathering** - Ask for plugin basics:
   - Plugin name (validate kebab-case)
   - Description (one-liner)
   - Author (name/email)
   - License (default MIT)

2. **Component selection** - Determine what the plugin needs:
   - Commands? (most plugins have at least one)
   - Hooks? (lifecycle integration)
   - Workflows? (multi-step procedures)
   - Agents? (subagent definitions)
   - Services/Docker? (self-contained dependencies)

3. **Component details** - For each selected component:
   - Commands: Ask how many, names, and brief descriptions
   - Hooks: Ask which lifecycle events (post-plan, post-execute, etc.)
   - Workflows: Ask how many and names
   - Agents: Ask how many and names
   - Services: Ask for service name (e.g., neo4j, postgres)

4. **Generation** - Create all files:
   - Create plugin directory
   - Generate plugin.json from gathered info
   - Generate README.md with plugin details
   - Generate each component file from templates

**Use AskUserQuestion tool** for gathering input. Structure questions with reasonable defaults.

**Workflow pattern:** Follow the adaptive questioning style from discuss-phase.md - ask essential questions first, then drill down based on answers.

**Template references:** Use @~/.claude/get-shit-done/templates/plugin/ for all file generation.
  </action>
  <verify>File exists at get-shit-done/workflows/plugin-builder.md with proper XML structure including objective, process steps, and template references</verify>
  <done>Workflow file complete with questioning flow for all plugin components and generation logic</done>
</task>

<task type="auto">
  <name>Task 2: Create component file templates</name>
  <files>
get-shit-done/templates/plugin/command.md
get-shit-done/templates/plugin/hook.md
get-shit-done/templates/plugin/workflow.md
get-shit-done/templates/plugin/agent.md
get-shit-done/templates/plugin/docker-compose.yml
  </files>
  <action>
Create template files for each plugin component type. Each template uses [PLACEHOLDER] markers for substitution.

**command.md template:**
```markdown
---
name: [PLUGIN_NAME]:[COMMAND_NAME]
description: [COMMAND_DESCRIPTION]
argument-hint: "[ARGUMENT_HINT]"
allowed-tools: [Read, Write, Bash, Glob, Grep]
---

<process>
[COMMAND_PROCESS]

[Describe what this command does and how it works]
</process>
```

**hook.md template:**
```markdown
---
trigger: [HOOK_TRIGGER]
---

<process>
[Describe what this hook does when triggered]

**Trigger:** [HOOK_TRIGGER]
**Purpose:** [HOOK_PURPOSE]

## Steps

1. [Step 1]
2. [Step 2]
</process>
```

**workflow.md template:**
```markdown
# [WORKFLOW_NAME] Workflow

<objective>
[WORKFLOW_OBJECTIVE]

Purpose: [WORKFLOW_PURPOSE]
Output: [WORKFLOW_OUTPUT]
</objective>

<process>

<step name="step_1">
[Step 1 description]
</step>

<step name="step_2">
[Step 2 description]
</step>

</process>
```

**agent.md template:**
```markdown
# [AGENT_NAME]

<role>
[AGENT_ROLE]

Purpose: [AGENT_PURPOSE]
</role>

<process>
[AGENT_PROCESS]

## Execution Flow

1. [Step 1]
2. [Step 2]
3. [Step 3]
</process>
```

**docker-compose.yml template:**
```yaml
version: '3.8'

services:
  [SERVICE_NAME]:
    image: [SERVICE_IMAGE]
    container_name: gsd-[PLUGIN_NAME]-[SERVICE_NAME]
    ports:
      - "[HOST_PORT]:[CONTAINER_PORT]"
    environment:
      - [ENV_VAR]=[ENV_VALUE]
    volumes:
      - [PLUGIN_NAME]_data:/data
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "echo", "healthy"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  [PLUGIN_NAME]_data:
```

Each template should be minimal but complete - enough structure to be useful but not overwhelming.
  </action>
  <verify>All 5 template files exist in get-shit-done/templates/plugin/ directory</verify>
  <done>Component templates created with proper placeholder markers for all plugin component types</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Workflow file exists at get-shit-done/workflows/plugin-builder.md
- [ ] Workflow has proper XML structure with objective, process, steps
- [ ] Workflow covers all plugin component types (commands, hooks, workflows, agents, services)
- [ ] All 5 component templates exist in get-shit-done/templates/plugin/
- [ ] Templates use [PLACEHOLDER] markers consistently
- [ ] Templates follow existing GSD conventions
</verification>

<success_criteria>

- Workflow file complete with questioning flow
- All component templates created
- Templates use consistent placeholder naming
- Workflow references templates correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-plugin-builder/05.1-01-SUMMARY.md`
</output>
